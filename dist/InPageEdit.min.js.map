{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./module/_msg.js","webpack:///./module/pluginPreference.js","webpack:///./module/version.js","webpack:///./module/_elements.js","webpack:///./module/articleLink.js","webpack:///./module/quickEdit.js","webpack:///./module/findAndReplace.js","webpack:///./module/progress.js","webpack:///./module/quickPreview.js","webpack:///./module/quickDiff.js","webpack:///./index.js","webpack:///./module/about.js","webpack:///./module/loadQuickDiff.js","webpack:///./module/quickRedirect.js","webpack:///./module/quickRename.js","webpack:///./module/specialNotice.js","webpack:///./module/versionInfo.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_msg","api","version","$br","$hr","pluginPreference","doNotCollectMyInfo","doNotShowLocalWarn","editMinor","editSummary","lockToolBox","redLinkQuickEdit","outSideClose","watchList","Boolean","mw","user","options","setting","undefined","local","localStorage","getItem","JSON","parse","e","InPageEdit","myPreference","$","extend","json","default","set","settingKey","settingValue","stringify","setItem","modal","length","hook","fire","_analysis","ssi_modal","show","title","content","id","class","append","text","type","prop","for","style","html","placeholder","analysisUrl","onclick","href","target","click","dialog","className","center","okBtn","label","val","data","sizeClass","buttons","method","a","confirm","cancelBtn","res","close","onShow","setData","this","checked","each","change","attr","prepend","$progress","br","hr","progress","quickEdit","articleLink","element","url","action","util","getParamValue","section","replace","revision","split","location","substr","splitStr","config","wgArticlePath","wgServer","substring","pop","after","page","wgIsArticle","reload","mwApi","Api","findAndReplace","quickPreview","quickDiff","defaultOptions","wgPageName","pageId","summaryRevision","editText","editNotice","jsonGet","format","jsonPost","pageDetail","jumpTo","preference","date","Date","timestamp","getTime","now","toUTCString","decodeURIComponent","wgCurRevisionId","notify","oldid","console","time","info","table","result","minor","summary","pValue","basetimestamp","starttimestamp","errorformat","saveError","errorCode","feedback","errorThrown","errorInfo","errorMore","errors","code","edit","warning","position","closeAfter","error","postWithToken","done","window","unbind","setTimeout","getUrl","fail","postArticle","pst","beforeShow","hide","css","Number","height","prependTo","appendTo","btns","addBtn","open","middle","icon","btn","preventDefault","$this","strings","obj","textarea","start","selectionStart","stop","selectionEnd","selectedText","slice","selectStart","setSelectionRange","focus","insertText","contentDone","warn","wikitext","pageid","fadeIn","sections","line","anchor","diffJson","fromrev","totext","hideBtn","pageName","isPreview","fromsection","queryJson","inprop","queryDone","namespace","query","pages","protection","level","_hasRight","wgNamespaceNumber","addClass","namespaceNoticePage","pageNoticePage","wgFormattedNamespaces","meta","ammessages","wikitextNs","allmessages","wikitextPage","post","contentmodel","preview","notice","pageids","titles","timeEnd","b","beforeClose","keepContent","templateName","templates","imageName","images","wgScript","iiprop","src","imageinfo","load","removeClass","origin","rows","searchexp","searchfor","$textarea","replacewith","flagg","flagi","enableregex","flags","RegExp","rcount","matched","match","closeIcon","params","modalSize","disableeditsection","test","fixedHeight","fitScreen","parent","then","param","$modalTitle","$diffArea","$loading","loader","wikiScript","topst","fromtext","frompst","diffTable","compare","toTitle","totitle","userLink","colspan","fromrevid","fromtitle","fromuser","fromparsedcomment","torelative","torevid","touser","toparsedcomment","fromsize","tosize","find","warnings","fromtexthidden","totexthidden","fromuserhidden","touserhidden","fromcommenthidden","tocommenthidden","about","loadQuickDiff","quickRedirect","quickRename","specialNotice","versionInfo","forEach","freeze","aboutUrl","addLink","ipeDiffLink","diff","curid","toid","torev","setInterval","wgAction","before","question","createonly","failed","fromPage","toPage","_resolveExists","delete","from","to","reason","movetalk","movesubpages","noredirect","updatelogsUrl","githubLink"],"mappings":"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","file":"InPageEdit.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","function _msg(i) {\r\n  return `(i18njs-${i})`\r\n}\r\n\r\nmodule.exports = {\r\n  _msg\r\n}","const api = require('./api.json')\r\nconst version = require('./version');\r\n\r\nconst { $br, $hr } = require('./_elements');\r\n\r\n/**\r\n * @module preference 个人设置模块\r\n */\r\nvar pluginPreference = {\r\n  /**\r\n   * @name 预设值\r\n   * @return {object}\r\n   */\r\n  \"default\": {\r\n    doNotCollectMyInfo: false,\r\n    doNotShowLocalWarn: false,\r\n    editMinor: false,\r\n    editSummary: _msg('preference-summary-default'),\r\n    lockToolBox: false,\r\n    redLinkQuickEdit: true,\r\n    outSideClose: true,\r\n    watchList: Boolean(mw.user.options.get('watchdefault'))\r\n  },\r\n  /**\r\n   * @name 获取设置 \r\n   * @description 合并保存在用户页的设置以及localStorage的设置，有容错机制\r\n   * @param {string} setting 返回相应的设置，为空时返回全部设置\r\n   * @return {object|string}\r\n   */\r\n  get: function (setting) {\r\n    var setting = setting || undefined;\r\n    var local = localStorage.getItem('InPageEditPreference') || '{}';\r\n    try {\r\n      var local = JSON.parse(local);\r\n    } catch (e) {\r\n      var local = {};\r\n    }\r\n    if (typeof InPageEdit.myPreference === 'object') {\r\n      local = $.extend({}, local, InPageEdit.myPreference);\r\n    }\r\n    var json = $.extend({}, pluginPreference.default, local);\r\n    if (typeof (setting) === 'string' && setting !== '') {\r\n      return json.hasOwnProperty(setting) ? json[setting] : null;\r\n    } else {\r\n      return json;\r\n    }\r\n  },\r\n  /**\r\n   * @name 保存设置\r\n   * @param {Object|string} settingKey\r\n   * @param {any} settingValue\r\n   * @example 可以这样 pluginPreference.set({ key: 'value' }) 也可以 pluginPreference.set('key', 'value')\r\n   */\r\n  set: function (settingKey = {}, settingValue = undefined) {\r\n    var options = {};\r\n    if (typeof settingKey === 'string' && settingValue !== undefined) {\r\n      options[settingKey] = settingValue;\r\n    } else if (typeof settingKey === 'object') {\r\n      options = settingKey;\r\n    } else {\r\n      return;\r\n    }\r\n    options = $.extend({}, pluginPreference.get(), options);\r\n    options = JSON.stringify(options);\r\n    localStorage.setItem('InPageEditPreference', options);\r\n  },\r\n  /**\r\n   * @name 用户图形界面\r\n   * @description 打开可视化设置窗口\r\n   */\r\n  modal: function () {\r\n    // 防止多开设置页面\r\n    if ($('#ipe-preference-form').length > 0) return;\r\n\r\n    mw.hook('pluginPreference').fire();\r\n    pluginPreference.set();\r\n    var local = pluginPreference.get();\r\n    _analysis('plugin_setting');\r\n\r\n    ssi_modal.show({\r\n      outSideClose: false,\r\n      title: _msg('preference-title') + ' - ' + version,\r\n      content:\r\n        $('<section>', { id: 'ipe-preference-form', class: 'ipe-preference-form' }).append(\r\n          $('<h4>', { text: _msg('preference-editor-label') }),\r\n          $('<label>').append(\r\n            $('<input>', { id: 'outSideClose', type: 'checkbox' }).prop('checked', local.outSideClose),\r\n            $('<span>', { text: _msg('preference-outSideClose') })\r\n          ),\r\n          $br,\r\n          $('<label>').append(\r\n            $('<input>', { id: 'editMinor', type: 'checkbox' }).prop('checked', local.editMinor),\r\n            $('<span>', { text: _msg('preference-setMinor') })\r\n          ),\r\n          $br,\r\n          $('<h4>', { text: _msg('preference-summary-label') }),\r\n          $('<label>', { for: 'editSummary', style: 'padding-left: 0; font-size: small', html: _msg('preference-editSummary') }),\r\n          $br,\r\n          $('<input>', { id: 'editSummary', style: 'width: 96%', value: local.editSummary, placeholder: 'Edit via InPageEdit, yeah~' }),\r\n          $('<h4>', { text: _msg('preference-analysis-label') }),\r\n          $('<span>', { style: 'font-size: small; line-height: 0.9em', html: _msg('preference-analysis-view', `[${api.analysisUrl} ${api.analysisUrl}]`) }),\r\n          $('<h4>', { text: _msg('preference-about-label') }),\r\n          $('<button>', { class: 'btn btn-secondary', onclick: \"InPageEdit.about()\", text: _msg('preference-aboutAndHelp') }),\r\n          $('<button>', { class: 'btn btn-secondary', style: 'margin-left: 1em;', onclick: \"InPageEdit.versionInfo()\", text: _msg('preference-updatelog') }),\r\n          $('<a>', { href: 'https://ipe.miraheze.org/wiki/', target: '_blank', style: 'margin-left: 1em;' }).append(\r\n            $('<button>', { class: 'btn btn-secondary', text: _msg('preference-translate') })\r\n          ),\r\n          $('<a>', { href: 'https://discord.gg/VUVAh8w', target: '_blank', style: 'margin-left: 1em;' }).append(\r\n            $('<button>', { class: 'btn btn-secondary', text: _msg('preference-discord') })\r\n          ),\r\n          $hr,\r\n          $('<strong>', { style: 'font-size: small; line-height: 0.9em', text: _msg('preference-savelocal-label') }),\r\n          $br,\r\n          $('<span>', { style: 'font-size: small; line-height: 0.9em', text: _msg('preference-savelocal') }).append(\r\n            $('<a>', { href: 'javascript:;', id: 'ipeSaveLocalShow', text: _msg('preference-savelocal-btn') }).click(function () {\r\n              // 永久保存（本地用户页）\r\n              ssi_modal.dialog({\r\n                className: 'in-page-edit',\r\n                center: true,\r\n                title: _msg('preference-savelocal-popup-title'),\r\n                content: '<section id=\"ipeSaveLocal\">' + _msg('preference-savelocal-popup') + '<br/><textarea style=\"font-size: 12px; resize: none; width: 100%; height: 10em;\" readonly></textarea><br/>' + _msg('preference-savelocal-popup-notice') + '</section>',\r\n                okBtn: {\r\n                  className: 'btn btn-primary btn-single',\r\n                  label: _msg('ok')\r\n                }\r\n              });\r\n              $('#ipeSaveLocal textarea').val('/** InPageEdit Preferences **/\\nwindow.InPageEdit = window.InPageEdit || {}; // Keep this line\\nInPageEdit.myPreference = ' + JSON.stringify($.extend({}, pluginPreference.get(), $('#ipe-preference-form').data()), null, 2));\r\n            })\r\n          )\r\n        ),\r\n      sizeClass: 'dialog',\r\n      className: 'in-page-edit ipe-preference',\r\n      center: true,\r\n      buttons: [{\r\n        label: _msg('preference-reset'),\r\n        className: 'btn btn-danger',\r\n        method: function (a, modal) {\r\n          ssi_modal.confirm({\r\n            title: _msg('preference-reset-confirm-title'),\r\n            content: _msg('preference-reset-confirm'),\r\n            className: 'in-page-edit',\r\n            center: true,\r\n            okBtn: {\r\n              label: _msg('ok'),\r\n              className: 'btn btn-danger'\r\n            },\r\n            cancelBtn: {\r\n              label: _msg('cancel'),\r\n              className: 'btn'\r\n            }\r\n          }, (res) => {\r\n            if (res) {\r\n              pluginPreference.set(pluginPreference.default);\r\n              modal.close();\r\n            } else {\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n      }, {\r\n        label: _msg('preference-save'),\r\n        className: 'btn btn-primary',\r\n        method: function (a, modal) {\r\n          pluginPreference.set($('#ipe-preference-form').data());\r\n          modal.close();\r\n        }\r\n      }\r\n      ],\r\n      onShow: function () {\r\n        function setData() {\r\n          if (this.type === 'checkbox') {\r\n            $('#ipe-preference-form').data(this.id, this.checked);\r\n          } else if (this.type === 'text') {\r\n            $('#ipe-preference-form').data(this.id, this.value);\r\n          }\r\n        }\r\n        $('#ipe-preference-form input').each(setData).change(setData);\r\n\r\n        if (typeof (InPageEdit.myPreference) !== 'undefined') {\r\n          $('#ipe-preference-form input, .ipe-preference .ssi-modalBtn').attr({ 'disabled': 'disabled' });\r\n          $('#ipe-preference-form').prepend(\r\n            $('<p>', { class: 'has-local-warn', style: 'padding-left: 8px; border-left: 6px solid orange; font-size: small;', html: _msg('preference-savelocal-popup-haslocal') })\r\n          );\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  pluginPreference\r\n}","const version = require('../package.json').version;\r\n\r\nmodule.exports = version;","/**\r\n * @module _elements 常用html元素\r\n */\r\nvar $br = '<br>',\r\n  $hr = '<hr>',\r\n  $progress = '<div class=\"ipe-progress\" style=\"width: 100%\"><div class=\"ipe-progress-bar\"></div></div>';\r\n\r\nmodule.exports = {\r\n  $br,\r\n  br: $br,\r\n  $hr,\r\n  hr: $hr,\r\n  $progress,\r\n  progress: $progress,\r\n}","const { pluginPreference } = require('./pluginPreference');\r\nconst { quickEdit } = require('./quickEdit');\r\n\r\n/**\r\n * @module articleLink 获取段落编辑以及编辑链接\r\n * @param {Element} element jQuery element to find edit links\r\n */\r\nvar articleLink = function (element) {\r\n  if (element === undefined) {\r\n    if (pluginPreference.get('redLinkQuickEdit') === true) {\r\n      element = $('#mw-content-text a');\r\n    } else {\r\n      element = $('#mw-content-text a:not(.new)');\r\n    }\r\n  }\r\n  element.each(function (i) {\r\n    if ($(this).attr('href') === undefined)\r\n      return;\r\n    var url = $(this).attr('href'),\r\n      action = mw.util.getParamValue('action', url) || mw.util.getParamValue('veaction', url),\r\n      title = mw.util.getParamValue('title', url),\r\n      section = mw.util.getParamValue('section', url).replace(/(T-)/ig, ''),\r\n      revision = mw.util.getParamValue('oldid', url);\r\n\r\n    // 不是本地编辑链接\r\n    if (url.split('/')['2'] !== location.href.split('/')['2'] && url.substr(0, 1) !== '/')\r\n      return;\r\n\r\n    // 不是 index.php?title=FOO 形式的url\r\n    if (title === null) {\r\n      var splitStr = config.wgArticlePath.replace('$1', '');\r\n      if (splitStr === '/') {\r\n        splitStr = config.wgServer.substring(config.wgServer.length - 4) + '/';\r\n      }\r\n      title = url.split(splitStr).pop().split('?')['0'];\r\n    }\r\n\r\n    if (action === 'edit' && title !== undefined) {\r\n      $(this).after(\r\n        $('<span>', {\r\n          'class': 'in-page-edit-article-link-group'\r\n        }).append(\r\n          $('<a>', {\r\n            href: 'javascript:void(0)',\r\n            class: 'in-page-edit-article-link',\r\n            text: _msg('quick-edit')\r\n          }).click(function () {\r\n            var options = {};\r\n            options.page = title;\r\n            if (revision !== null) {\r\n              options.revision = revision;\r\n            } else if (section !== null) {\r\n              options.section = section;\r\n            }\r\n            if (!config.wgIsArticle) options.reload = false;\r\n            quickEdit(options);\r\n          })\r\n        )\r\n      );\r\n    }\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  articleLink\r\n}","// const ssi_modal = require('../src/ssi_modal/ssi-modal.js');\r\nvar mwApi = new mw.Api();\r\n\r\nconst { _msg } = require('./_msg');\r\n\r\nconst { findAndReplace } = require('./findAndReplace');\r\nconst { pluginPreference } = require('./pluginPreference');\r\nconst { progress } = require('./progress')\r\nconst { quickPreview } = require('./quickPreview');\r\nconst { quickDiff } = require('./quickDiff');\r\n\r\n/**\r\n * @module quickEdit 快速编辑模块\r\n * \r\n * @param {Object} options\r\n * @param {String} options.page edit page (default: wgPageName)\r\n * @param {Number} options.revision page rev ID\r\n * @param {Number} options.section edit section\r\n * @param {Boolean} options.reload if reload page after save successful (default: true)\r\n */\r\nvar quickEdit = function (options) {\r\n  mw.hook('InPageEdit.quickEdit').fire();\r\n  /** 获取设定信息，设置缺省值 **/\r\n  var options = options || {};\r\n  if (typeof options === 'string') {\r\n    options = {\r\n      page: options\r\n    }\r\n  }\r\n  var defaultOptions = {\r\n    page: config.wgPageName,\r\n    pageId: -1,\r\n    revision: null,\r\n    summaryRevision: '',\r\n    section: null,\r\n    editText: '',\r\n    editMinor: false,\r\n    editSummary: _msg('preference-summary-default'),\r\n    editNotice: '',\r\n    outSideClose: true,\r\n    jsonGet: {\r\n      action: 'parse',\r\n      page: options.page || config.wgPageName,\r\n      prop: 'wikitext|langlinks|categories|templates|images|sections',\r\n      format: 'json'\r\n    },\r\n    jsonPost: {},\r\n    pageDetail: {},\r\n    jumpTo: '',\r\n    reload: true\r\n  }\r\n\r\n  /** 获取用户设置 **/\r\n  var preference = pluginPreference.get();\r\n\r\n  /** 缓存时间戳 **/\r\n  var date = new Date(),\r\n    timestamp = date.getTime(),\r\n    now = date.toUTCString();\r\n\r\n  /** 将选项合并并标准化 **/\r\n  options = $.extend({}, defaultOptions, options, preference);\r\n  options.page = decodeURIComponent(options.page); // 解码网址 Unicode\r\n\r\n  _analysis('quick_edit');\r\n\r\n  if (options.revision !== null && options.revision !== '' && options.revision !== config.wgCurRevisionId) {\r\n    ssi_modal.notify('warning', {\r\n      className: 'in-page-edit',\r\n      content: _msg('notify-editing-history'),\r\n      title: _msg('notify-info')\r\n    });\r\n    delete options.jsonGet.page;\r\n    options.jsonGet.oldid = options.revision;\r\n    options.summaryRevision = '(' + _msg('editor-summary-rivision') + '[[Special:Diff/' + options.revision + ']])';\r\n  } else {\r\n    if (options.section !== null && options.section !== '') {\r\n      options.jsonGet.section = options.section;\r\n    }\r\n  }\r\n\r\n  // Debug\r\n  console.time('[InPageEdit] 获取页面源代码');\r\n  console.info('[InPageEdit] QuickEdit start with options:');\r\n  console.table(options);\r\n\r\n  // 显示主窗口\r\n  ssi_modal.show({\r\n    title: _msg('editor-title-editing') + ': <u class=\"editPage\">' + options.page.replace(/\\_/g, ' ') + '</u>',\r\n    content:\r\n      $('<div>').append(\r\n        $progress,\r\n        $('<section>', { class: 'hideBeforeLoaded' }).append(\r\n          // 编辑工具条\r\n          $('<div>', { class: 'editTools' }).append(\r\n            $('<div>', { class: 'btnGroup' }).append(\r\n              $('<div>', { class: 'toolSelect' }).append(\r\n                $('<div>', { class: 'label', text: _msg('editor-edittool-header') }),\r\n                $('<ul>', { class: 'ul-list' }).append(\r\n                  $('<li>', { class: 'editToolBtn', 'data-open': '\\n== ', 'data-middle': _msg('editor-edittool-header-text'), 'data-close': ' ==\\n', text: 'H2' }),\r\n                  $('<li>', { class: 'editToolBtn', 'data-open': '\\n=== ', 'data-middle': _msg('editor-edittool-header-text'), 'data-close': ' ===\\n', text: 'H3' }),\r\n                  $('<li>', { class: 'editToolBtn', 'data-open': '\\n==== ', 'data-middle': _msg('editor-edittool-header-text'), 'data-close': ' ====\\n', text: 'H4' }),\r\n                  $('<li>', { class: 'editToolBtn', 'data-open': '\\n===== ', 'data-middle': _msg('editor-edittool-header-text'), 'data-close': ' =====\\n', text: 'H5' })\r\n                )\r\n              )\r\n            ),\r\n            $('<div>', { class: 'btnGroup' }).append(\r\n              $('<span>', { class: 'label', text: '格式' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-bold btn', 'data-open': \"'''\", 'data-middle': _msg('editor-edittool-bold'), 'data-close': \"'''\" }),\r\n              $('<button>', { class: 'editToolBtn fa fa-italic btn', 'data-open': \"''\", 'data-middle': _msg('editor-edittool-italic'), 'data-close': \"''\" }),\r\n              $('<button>', { class: 'editToolBtn fa fa-list-ul btn', 'data-open': '\\n* ', 'data-middle': _msg('editor-edittool-list-bulleted'), 'data-close': '\\n' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-list-ol btn', 'data-open': '\\n# ', 'data-middle': _msg('editor-edittool-list-numbered'), 'data-close': '\\n' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-won btn', 'data-open': '<' + 'nowiki>', 'data-middle': _msg('editor-edittool-nowiki'), 'data-close': '</nowiki>' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-level-down fa-rotate-90 btn', 'data-open': '<br>\\n', 'data-middle': '', 'data-close': '' })\r\n            ),\r\n            $('<div>', { class: 'btnGroup' }).append(\r\n              $('<span>', { class: 'label', text: '插入' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-link btn', 'data-open': '[' + '[', 'data-middle': _msg('editor-edittool-internal-link'), 'data-close': ']]' }),\r\n              $('<button>', { class: 'editToolBtn fa fa-file-image-o btn', 'data-open': '[' + '[File:', 'data-middle': 'Example.png', 'data-close': '|thumb]]' }),\r\n              $('<button>', { class: 'editToolBtn btn', 'data-open': '\\n<' + 'gallery>\\n', 'data-middle': 'Example1.jpg|Description\\nExample2.png|Description', 'data-close': '\\n</gallery>\\n', html: '<span class=\"fa-stack\"><i class=\"fa fa-picture-o fa-stack-1x\"></i><i class=\"fa fa-picture-o fa-stack-1x\" style=\"left: 2px;top: 2px;text-shadow: 1px 1px 0 #fff;\"></i></span>' })\r\n            ),\r\n            $('<div>', { class: 'btnGroup extra', style: 'display: none' }).append(\r\n              $('<span>', { class: 'label', text: '自定义' })\r\n            ),\r\n            $('<div>', { class: 'btnGroup special-tools', style: 'float: right' }).append(\r\n              $('<button>', { class: 'btn fa fa-search' }).click(function () {\r\n                findAndReplace($('.ipe-editor.timestamp-' + timestamp + ' .editArea'));\r\n              })\r\n            )\r\n          ),\r\n          // 编辑框\r\n          $('<textarea>', { class: 'editArea', style: 'margin-top: 0;' }),\r\n          // 页面分析\r\n          $('<div>', { class: 'editOptionsLabel hideBeforeLoaded' }).append(\r\n            $('<aside>', { class: 'detailArea' }).append(\r\n              $('<label>', { class: 'detailToggle', text: _msg('editor-detail-button-toggle') }),\r\n              $('<div>', { class: 'detailBtnGroup' }).append(\r\n                $('<a>', { href: 'javascript:;', class: 'detailBtn', id: 'showTemplates', text: _msg('editor-detail-button-templates') }),\r\n                ' | ',\r\n                $('<a>', { href: 'javascript:;', class: 'detailBtn', id: 'showImages', text: _msg('editor-detail-button-images') })\r\n              )\r\n            ),\r\n            // 摘要&小编辑\r\n            $('<label>', { for: 'editSummary', text: _msg('editSummary') }),\r\n            $br,\r\n            $('<input>', { class: 'editSummary', id: 'editSummary', placeholder: 'Edit via InPageEdit~', value: options.editSummary.replace(/\\$oldid/ig, options.summaryRevision) }),\r\n            $br,\r\n            $('<label>').append(\r\n              $('<input>', { type: 'checkbox', class: 'editMinor', id: 'editMinor', checked: options.editMinor }),\r\n              $('<span>', { text: _msg('markAsMinor') })\r\n            ),\r\n            $br,\r\n            $('<label>').append(\r\n              $('<input>', { type: 'checkbox', class: 'reloadPage', id: 'reloadPage', checked: options.reload }),\r\n              $('<span>', { text: _msg('editor-reload-page') })\r\n            )\r\n          )\r\n        )\r\n      ),\r\n    outSideClose: options.outSideClose,\r\n    className: 'in-page-edit ipe-editor timestamp-' + timestamp,\r\n    sizeClass: 'large',\r\n\r\n    /* 按钮 */\r\n    buttons: [{\r\n      label: _msg('editor-button-save'),\r\n      className: 'btn btn-primary leftBtn hideBeforeLoaded save-btn',\r\n      method: function (e, modal) {\r\n        var modal = modal;\r\n        ssi_modal.confirm({\r\n          className: 'in-page-edit',\r\n          center: true,\r\n          content: _msg('editor-confirm-save'),\r\n          okBtn: {\r\n            className: 'btn btn-primary',\r\n            label: _msg('confirm')\r\n          },\r\n          cancelBtn: {\r\n            className: 'btn btn-secondary',\r\n            label: _msg('cancel')\r\n          },\r\n        },\r\n          function (result) {\r\n            if (result) {\r\n              var text = $('.ipe-editor.timestamp-' + timestamp + ' .editArea').val(),\r\n                minor = $('.ipe-editor.timestamp-' + timestamp + ' .editMinor').prop('checked'),\r\n                section = options.section,\r\n                summary = $('.ipe-editor.timestamp-' + timestamp + ' .editSummary').val();\r\n              postArticle({\r\n                text: text,\r\n                page: options.page,\r\n                minor: minor,\r\n                section: section,\r\n                summary: summary\r\n              }, modal);\r\n            }\r\n          });\r\n      }\r\n    }, {\r\n      label: _msg('editor-button-preview'),\r\n      className: 'btn btn-secondary leftBtn hideBeforeLoaded',\r\n      method: function () {\r\n        _analysis('preview_edit');\r\n        var text = $('.ipe-editor.timestamp-' + timestamp + ' .editArea').val();\r\n        quickPreview({\r\n          title: options.page,\r\n          text: text,\r\n          pst: true\r\n        });\r\n      }\r\n    }, {\r\n      label: _msg('editor-button-diff'),\r\n      className: 'btn btn-secondary leftBtn hideBeforeLoaded diff-btn',\r\n      method: function () {\r\n        // ...\r\n      }\r\n    }, {\r\n      label: _msg('cancel'),\r\n      className: 'btn btn-danger',\r\n      method: function (e, modal) {\r\n        modal.close();\r\n      }\r\n    }\r\n    ],\r\n\r\n    /* 预加载 */\r\n    beforeShow: function () {\r\n      // 设置样式\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .hideBeforeLoaded').hide();\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .ipe-progress').css('margin', Number($(window).height() / 3 - 50) + 'px 0');\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .editArea').css('height', $(window).height() / 3 * 2 - 100);\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .editOptionsLabel').prependTo('.ipe-editor.timestamp-' + timestamp + ' .ssi-buttons');\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .leftBtn').appendTo('.ipe-editor.timestamp-' + timestamp + ' .ssi-leftButtons');\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .ssi-modalTitle').append(\r\n        $('<a>', {\r\n          class: 'showEditNotice',\r\n          href: 'javascript:void(0);',\r\n          html: '<i class=\"fa fa-info-circle\"></i> ' + _msg('editor-has-editNotice'),\r\n          style: 'display: none;'\r\n        }).click(function () {\r\n          ssi_modal.show({\r\n            className: 'in-page-edit',\r\n            center: true,\r\n            title: _msg('editor-title-editNotice'),\r\n            content: '<section class=\"editNotice\">' + $('.ipe-editor.timestamp-' + timestamp).data('editNotice') + '</section>'\r\n          });\r\n        })\r\n      );\r\n\r\n      /** Edit-Tool 扩展 **/\r\n      function insertText(strings, obj) {\r\n        var strings = strings,\r\n          textarea = obj || $('.in-page-edit.ipe-editor .editArea')[0],\r\n          start = textarea.selectionStart,\r\n          stop = textarea.selectionEnd,\r\n          selectedText = textarea.value.slice(start, stop);\r\n        textarea.value =\r\n          textarea.value.slice(0, start) +\r\n          (strings.open || '') +\r\n          (selectedText || strings.middle || '') +\r\n          (strings.close || '') +\r\n          textarea.value.slice(stop);\r\n        var selectStart = start + (strings.open.length || 0);\r\n        textarea.setSelectionRange(selectStart, selectStart + (selectedText.length || strings.middle.length || 0));\r\n        textarea.focus();\r\n      }\r\n      // 用户自定义按钮\r\n      if (InPageEdit.buttons) {\r\n        var btns = InPageEdit.buttons;\r\n        $('.ipe-editor.timestamp-' + timestamp + ' .btnGroup.extra').show();\r\n        function addBtn(open, middle, close, icon) {\r\n          var open = open || '',\r\n            middle = middle || '',\r\n            close = close || '',\r\n            icon = 'fa-' + icon || 'fa-wrench';\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .btnGroup.extra').append(\r\n            $('<button>', { class: 'editToolBtn btn', 'data-open': open, 'data-middle': middle, 'data-close': close, html: `<i class=\"fa ${icon}\"></i>` })\r\n          );\r\n        }\r\n        for (var i = 0; i < btns.length; i++) {\r\n          var btn = btns[i];\r\n          addBtn(btn.open, btn.middle, btn.close, btn.text);\r\n        }\r\n      }\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .editToolBtn').click(function (e) {\r\n        e.preventDefault();\r\n        var $this = $(this),\r\n          $open = $this.attr('data-open') || '',\r\n          $middle = $this.attr('data-middle') || '',\r\n          $close = $this.attr('data-close') || '';\r\n        insertText({\r\n          open: $open,\r\n          middle: $middle,\r\n          close: $close\r\n        }, $('.ipe-editor.timestamp-' + timestamp + ' .editArea')[0]);\r\n      });\r\n    },\r\n    /**\r\n  * @event onShow\r\n  * @description 模态框显示后\r\n  */\r\n    onShow: function (a, modal) {\r\n      mw.hook('InPageEdit.quickEdit.modal').fire();\r\n      // 绑定事件，在尝试离开页面时提示\r\n      $('.ipe-editor.timestamp-' + timestamp + ' .editArea').change(function () {\r\n        $(this).attr('data-modifiled', 'true');\r\n        $(window).bind('beforeunload', function () {\r\n          return _msg('window-leave-confirm');\r\n        });\r\n      });\r\n      // 获取权限\r\n      if (_hasRight('edit') === false) {\r\n        ssi_modal.notify('dialog', {\r\n          className: 'in-page-edit',\r\n          position: 'center bottom',\r\n          title: _msg('notify-no-right'),\r\n          content: _msg('editor-no-right'),\r\n          okBtn: {\r\n            label: _msg('ok'),\r\n            className: 'btn btn-primary',\r\n            method: function (e, modal) {\r\n              modal.close();\r\n            }\r\n          }\r\n        });\r\n        $('.ipe-editor.timestamp-' + timestamp + ' .save-btn').addClass('btn-danger');\r\n      }\r\n\r\n      // 解析页面内容\r\n      mwApi.get(options.jsonGet).done(function (data) {\r\n        var data = data;\r\n        console.timeEnd('[InPageEdit] 获取页面源代码');\r\n        contentDone(data);\r\n      }).fail(function (a, b, errorThrown) {\r\n        console.timeEnd('[InPageEdit] 获取页面源代码');\r\n        console.warn('[InPageEdit]警告：无法获取页面内容');\r\n        var data = errorThrown;\r\n        contentDone(data);\r\n      });\r\n\r\n      // 页面内容获取完毕，后续工作\r\n      function contentDone(data) {\r\n        var data = data;\r\n        options.pageDetail = data;\r\n\r\n        if (data.hasOwnProperty('error')) {\r\n          console.warn('[InPageEdit]警告：无法获取页面内容');\r\n          options.editText = '<!-- ' + data.error.info + ' -->';\r\n          options.pageId = -1;\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .detailArea').hide();\r\n        } else {\r\n          options.editText = data.parse.wikitext['*'];\r\n          options.pageId = data.parse.pageid;\r\n        }\r\n        // 设定一堆子样式\r\n        $('.ipe-editor.timestamp-' + timestamp + ' .ipe-progress').hide();\r\n        $('.ipe-editor.timestamp-' + timestamp + ' .hideBeforeLoaded').fadeIn(500);\r\n        $('.ipe-editor.timestamp-' + timestamp + ' .editArea').val(options.editText + '\\n');\r\n\r\n        if (options.section !== null) {\r\n          var val = $('.ipe-editor.timestamp-' + timestamp + ' .editSummary').val();\r\n          val = val.replace(/\\$section/ig, '/* ' + data.parse.sections[0].line + ' */');\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .editSummary').val(val);\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .editPage').after('<span class=\"editSection\">→' + data.parse.sections[0].line + '</span>');\r\n          options.jumpTo = '#' + data.parse.sections[0].anchor;\r\n        } else {\r\n          var val = $('.ipe-editor.timestamp-' + timestamp + ' .editSummary').val();\r\n          val = val.replace(/\\$section/ig, '');\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .editSummary').val(val);\r\n          options.jumpTo = '';\r\n        }\r\n        if (options.revision !== null && options.revision !== '' && options.revision !== config.wgCurRevisionId) {\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .editPage').after('<span class=\"editRevision\">(' + _msg('editor-title-editRevision') + '：' + options.revision + ')</span>');\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .diff-btn').click(() => {\r\n            _analysis('quick_diff_edit');\r\n            var text = $('.ipe-editor.timestamp-' + timestamp + ' .editArea').val();\r\n            var diffJson = {\r\n              fromrev: options.revision,\r\n              totext: text,\r\n              hideBtn: true,\r\n              pageName: options.page,\r\n              isPreview: true\r\n            }\r\n            if (options.section) {\r\n              diffJson.fromsection = options.section;\r\n            }\r\n            quickDiff(diffJson);\r\n          });\r\n        } else {\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .diff-btn').attr('disabled', true);\r\n        }\r\n\r\n        // 获取页面基础信息\r\n        console.time('[InPageEdit] 获取页面基础信息');\r\n        var queryJson = {\r\n          action: 'query',\r\n          prop: 'revisions|info',\r\n          inprop: 'protection',\r\n          format: 'json'\r\n        }\r\n        if (options.pageId !== -1) {\r\n          queryJson.pageids = options.pageId;\r\n        } else {\r\n          queryJson.titles = options.page;\r\n        }\r\n        mwApi.get(queryJson).done(function (data) {\r\n          var data = data;\r\n          console.info('[InPageEdit] 获取页面基础信息成功');\r\n          console.timeEnd('[InPageEdit] 获取页面基础信息');\r\n          // 记录页面最后编辑时间，防止编辑冲突\r\n          $('.ipe-editor.timestamp-' + timestamp).data('basetimestamp', data['query']['pages'][options.pageId].hasOwnProperty('revisions') ? data['query']['pages'][options.pageId]['revisions'][0]['timestamp'] : now);\r\n          queryDone(data);\r\n        }).fail(function (a, b, errorThrown) {\r\n          var data = errorThrown;\r\n          console.timeEnd('[InPageEdit] 获取页面基础信息');\r\n          console.warn('[InPageEdit] 获取页面基础信息失败');\r\n          $('.ipe-editor.timestamp-' + timestamp).data('basetimestamp', now);\r\n          queryDone(data);\r\n        });\r\n\r\n        /** 页面保护等级和编辑提示等 **/\r\n        function queryDone(data) {\r\n          var data = data;\r\n          options.namespace = data.query.pages[options.pageId].ns; // 名字空间ID\r\n          options.protection = data.query.pages[options.pageId]['protection'] || []; // 保护等级\r\n          if (data.query.pages[options.pageId].hasOwnProperty('revisions')) {\r\n            options.revision = data.query.pages[options.pageId]['revisions'][0]['revid']; // 版本号\r\n          }\r\n\r\n          // 使页面名标准化\r\n          options.page = data.query.pages[options.pageId].title;\r\n          $('.ipe-editor.timestamp-' + timestamp + ' .editPage').text(options.page);\r\n\r\n          if (options.revision) {\r\n            $('.ipe-editor.timestamp-' + timestamp + ' .diff-btn').attr('disabled', false).click(function () {\r\n              _analysis('quick_diff_edit');\r\n              var text = $('.ipe-editor.timestamp-' + timestamp + ' .editArea').val();\r\n              var diffJson = {\r\n                fromrev: options.revision,\r\n                totext: text,\r\n                hideBtn: true,\r\n                pageName: options.page,\r\n                isPreview: true\r\n              }\r\n              if (options.section) {\r\n                diffJson.fromsection = options.section;\r\n              }\r\n              quickDiff(diffJson);\r\n            })\r\n          }\r\n\r\n          // 页面是否被保护\r\n          if (options.protection.length > 0) {\r\n            for (var i = 0; i < options.protection.length; i++) {\r\n              if (options.protection[i].type === 'edit') {\r\n                if (\r\n                  (options.protection[i].level === 'autoconfirmed' && !_hasRight('autoconfirmed')) ||\r\n                  (options.protection[i].level === 'sysop' && !_hasRight('editprotected')) ||\r\n                  (config.wgNamespaceNumber === 8 && !_hasRight('editinterface'))\r\n                ) {\r\n                  ssi_modal.notify('dialog', {\r\n                    className: 'in-page-edit',\r\n                    position: 'center bottom',\r\n                    title: _msg('notify-no-right'),\r\n                    content: _msg('editor-no-right'),\r\n                    okBtn: {\r\n                      label: _msg('ok'),\r\n                      className: 'btn btn-primary',\r\n                      method: function (e, modal) {\r\n                        modal.close();\r\n                      }\r\n                    }\r\n                  });\r\n                  $('.ipe-editor.timestamp-' + timestamp + ' .save-btn').addClass('btn-danger');\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // 获取编辑提示\r\n          var namespaceNoticePage = 'Editnotice-' + options.namespace,\r\n            pageNoticePage = namespaceNoticePage + '-' +\r\n              options.page\r\n                .replace(/_/, ' ') // 将页面名里的 _ 转换为空格\r\n                .replace(config.wgFormattedNamespaces[options.namespace] + ':', ''); // 去掉名字空间\r\n\r\n          mwApi.get({\r\n            action: 'query',\r\n            meta: 'allmessages',\r\n            ammessages: namespaceNoticePage + '|' + pageNoticePage\r\n          }).done(function (data) {\r\n            var wikitextNs = data.query.allmessages[0]['*'] || '',\r\n              wikitextPage = data.query.allmessages[1]['*'] || '';\r\n            if (wikitextNs === '' && wikitextPage === '') return; // 没有编辑提示\r\n            // 将编辑提示解析为 html\r\n            mwApi.post({\r\n              action: 'parse',\r\n              title: options.page,\r\n              contentmodel: 'wikitext',\r\n              preview: true,\r\n              text: wikitextPage + '\\n' + wikitextNs\r\n            }).done(function (data) {\r\n              var data = data;\r\n              options.editNotice = data.parse.text['*'];\r\n              var notice = $('.ipe-editor.timestamp-' + timestamp).data('editNotice') || '';\r\n              notice += '\\n' + options.editNotice;\r\n              $('.ipe-editor.timestamp-' + timestamp).data('editNotice', notice);\r\n              $('.ipe-editor.timestamp-' + timestamp + ' .showEditNotice').show();\r\n            });\r\n          });\r\n\r\n        }\r\n      }\r\n    },\r\n\r\n    /* 确认是否取消 */\r\n    beforeClose: function (modal) {\r\n      if ($('.ipe-editor.timestamp-' + timestamp + ' .editArea').attr('data-modifiled') !== 'true') {\r\n        close();\r\n        return;\r\n      } else if ($('.ipe-editor.timestamp-' + timestamp + ' .editArea').attr('data-confirmclose') === 'true') {\r\n        closeNoReload();\r\n        return;\r\n      }\r\n      ssi_modal.confirm({\r\n        className: 'in-page-edit',\r\n        center: true,\r\n        content: _msg('editor-leave-confirm'),\r\n        okBtn: {\r\n          className: 'btn btn-danger',\r\n          label: _msg('confirm')\r\n        },\r\n        cancelBtn: {\r\n          className: 'btn btn-secondary',\r\n          label: _msg('cancel')\r\n        }\r\n      },\r\n        function (result) {\r\n          if (result === true) {\r\n            close();\r\n          }\r\n        });\r\n      function close() {\r\n        $(window).unbind('beforeunload');\r\n        modal.options.keepContent = false;\r\n        modal.options.beforeClose = '';\r\n        modal.close();\r\n        ssi_modal.notify('info', {\r\n          className: 'in-page-edit',\r\n          position: 'right top',\r\n          title: _msg('cancel'),\r\n          content: _msg('notify-no-change')\r\n        });\r\n      }\r\n      function closeNoReload() {\r\n        $(window).unbind('beforeunload');\r\n        modal.options.keepContent = false;\r\n        modal.options.beforeClose = '';\r\n        modal.close();\r\n      }\r\n      return false;\r\n    }\r\n  });\r\n\r\n  // 页面详情模块\r\n  $('.ipe-editor.timestamp-' + timestamp + ' .detailBtnGroup .detailBtn').click(function () {\r\n    _analysis('quick_edit_pagedetail');\r\n    var $this = $(this),\r\n      id = $this.attr('id'),\r\n      content = $('<ul>');\r\n    switch (id) {\r\n      case 'showTemplates':\r\n        var templates = options.pageDetail.parse.templates,\r\n          templateName;\r\n        for (var i = 0; i < templates.length; i++) {\r\n          templateName = templates[i]['*'];\r\n          $('<li>').append(\r\n            $('<a>', { href: mw.util.getUrl(templateName), target: '_blank', text: templateName }),\r\n            ' (',\r\n            $('<a>', { href: 'javascript:;', text: _msg('quick-edit'), class: 'quickEditTemplate', 'data-template-name': templateName }),\r\n            ')'\r\n          ).appendTo(content);\r\n        }\r\n        ssi_modal.show({\r\n          className: 'in-page-edit quick-edit-detail',\r\n          sizeClass: 'dialog',\r\n          title: _msg('editor-detail-title-templates'),\r\n          content: content\r\n        });\r\n        break;\r\n      case 'showImages':\r\n        var images = options.pageDetail.parse.images,\r\n          imageName;\r\n        for (var i = 0; i < images.length; i++) {\r\n          imageName = images[i];\r\n          $('<li>').append(\r\n            $('<a>', { href: mw.util.getUrl('File:' + imageName), target: '_balnk', text: imageName }),\r\n            ' (',\r\n            $('<a>', { href: 'javascript:;', class: 'quickViewImage', text: _msg('editor-detail-images-quickview'), 'data-image-name': imageName }),\r\n            ' | ',\r\n            $('<a>', { href: config.wgScript + '?title=Special:Upload&wpDestFile=' + imageName + '&wpForReUpload=1', target: '_balnk', text: _msg('editor-detail-images-upload') }),\r\n            ')'\r\n          ).appendTo(content);\r\n        }\r\n        ssi_modal.show({\r\n          className: 'in-page-edit quick-edit-detail',\r\n          sizeClass: 'dialog',\r\n          title: _msg('editor-detail-title-images'),\r\n          content: content\r\n        });\r\n        break;\r\n    }\r\n    $('.in-page-edit.quick-edit-detail .quickEditTemplate').click(function () {\r\n      _analysis('quick_edit_pagedetail_edit_template');\r\n      var $this = $(this);\r\n      var page = $this.attr('data-template-name');\r\n      quickEdit({\r\n        page: page\r\n      });\r\n    });\r\n    $('.in-page-edit.quick-edit-detail .quickViewImage').click(function () {\r\n      _analysis('quick_edit_pagedetail_view_image');\r\n      var $this = $(this);\r\n      var imageName = $this.attr('data-image-name');\r\n      ssi_modal.show({\r\n        className: 'in-page-edit quick-view-image',\r\n        center: true,\r\n        title: imageName.replace(/_/g, ' '),\r\n        content: $('<center>', { id: 'imageLayer' }).append(\r\n          $progress\r\n        ),\r\n        buttons: [{\r\n          label: _msg('editor-detail-images-upload'),\r\n          className: 'btn btn-primary',\r\n          method: function (a, modal) { window.open(config.wgScript + '?title=Special:Upload&wpDestFile=' + imageName + '&wpForReUpload=1') }\r\n        }, {\r\n          label: _msg('close'),\r\n          className: 'btn btn-secondary',\r\n          method: function (a, modal) { modal.close() }\r\n        }],\r\n        onShow: function () {\r\n          mwApi.get({\r\n            action: 'query',\r\n            format: 'json',\r\n            prop: 'imageinfo',\r\n            titles: 'File:' + imageName.replace(/file:/g, ''),\r\n            iiprop: 'url'\r\n          }).done(function (data) {\r\n            $('.quick-view-image .ipe-progress').hide();\r\n            $('.quick-view-image #imageLayer').append(\r\n              $('<img>', { src: data.query.pages['-1'].imageinfo[0].url, class: 'loading', style: 'max-width: 80%; max-height: 60vh' })\r\n            );\r\n            $('.quick-view-image #imageLayer img').load(function () {\r\n              $(this).removeClass('loading');\r\n            });\r\n          })\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  // 发布编辑模块\r\n  function postArticle(pValue, modal) {\r\n    var pValue = pValue,\r\n      modal = modal;\r\n    _analysis('quick_edit_save');\r\n    progress(_msg('editor-title-saving'));\r\n    options.jsonPost = {\r\n      action: 'edit',\r\n      basetimestamp: $('.ipe-editor.timestamp-' + timestamp).data('basetimestamp'),\r\n      starttimestamp: now,\r\n      text: pValue.text,\r\n      title: pValue.page,\r\n      minor: pValue.minor,\r\n      summary: pValue.summary,\r\n      errorformat: 'plaintext'\r\n    }\r\n    if (pValue.section !== undefined && pValue.section !== '' && pValue.section !== null) {\r\n      options.jsonPost.section = pValue.section;\r\n      delete options.jsonPost.basetimestamp;\r\n    }\r\n\r\n    mwApi.postWithToken('csrf', options.jsonPost).done(saveSuccess).fail(saveError);\r\n\r\n    // 保存正常\r\n    function saveSuccess(data, feedback, errorThrown) {\r\n      if (data.edit.result === 'Success') {\r\n        progress(true);\r\n        // 是否重载页面\r\n        if ($('.ipe-editor.timestamp-' + timestamp + ' .reloadPage').prop('checked')) {\r\n          var content;\r\n          $(window).unbind('beforeunload');\r\n          content = _msg('notify-save-success');\r\n          setTimeout(function () {\r\n            if (pValue.page === config.wgPageName) {\r\n              window.location = mw.util.getUrl(pValue.page) + options.jumpTo;\r\n              window.location.reload();\r\n            } else {\r\n              window.location.reload();\r\n            }\r\n          }, 500);\r\n        } else {\r\n          console.info('[InPageEdit] 将不会重载页面！');\r\n          content = _msg('notify-save-success-noreload');\r\n          setTimeout(function () {\r\n            progress(false);\r\n            $('.ipe-editor.timestamp-' + timestamp + ' .editArea').attr('data-confirmclose', 'true');\r\n            modal.close();\r\n          }, 1500);\r\n        }\r\n\r\n        ssi_modal.notify('success', {\r\n          className: 'in-page-edit',\r\n          position: 'right top',\r\n          title: _msg('notify-success'),\r\n          content: content\r\n        });\r\n      } else {\r\n        saveError(data, feedback, errorThrown)\r\n      }\r\n    }\r\n\r\n    // 保存失败\r\n    function saveError(errorCode, feedback, errorThrown) {\r\n      progress(false);\r\n      var data = errorThrown || errorCode; // 规范错误代码\r\n      var errorCode,\r\n        errorInfo,\r\n        errorMore = '';\r\n      if (data.errors !== undefined) {\r\n        errorCode = data.errors[0].code;\r\n        errorInfo = data.errors[0]['*'];\r\n        errorMore = '';\r\n      } else if (data.edit.result !== 'Success') {\r\n        errorCode = data.edit.code || 'Unknown';\r\n        errorInfo = data.edit.info || 'Reason unknown.';\r\n        errorMore = data.edit.warning || '';\r\n      } else {\r\n        errorCode = 'unknown';\r\n        errorInfo = 'Reason unknown.';\r\n        errorMore = 'Please contact plug-in author or try again.'\r\n      }\r\n      ssi_modal.show({\r\n        className: 'in-page-edit',\r\n        sizeClass: 'dialog',\r\n        center: true,\r\n        title: _msg('editor-save-error'),\r\n        content: errorInfo + '<hr style=\"clear: both\" />' + errorMore\r\n      });\r\n      ssi_modal.notify('error', {\r\n        className: 'in-page-edit',\r\n        position: 'right top',\r\n        closeAfter: {\r\n          time: 15\r\n        },\r\n        title: _msg('notify-error'),\r\n        content: _msg('editor-save-error') + '：<code>' + errorCode + '</code>'\r\n      });\r\n\r\n      console.error('[InPageEdit] Submit failed: \\nCode: ' + errorCode);\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  quickEdit\r\n}","/**\r\n     * @module findAndReplace 查找替换模块\r\n     * @param {element} element Textarea\r\n     */\r\nfunction findAndReplace(element) {\r\n  if (element === undefined) element = $('.in-page-edit.ipe-editor:last .editArea');\r\n  var origin = element.val();\r\n\r\n  ssi_modal.show({\r\n    className: 'in-page-edit',\r\n    sizeClass: 'dialog',\r\n    center: true,\r\n    outSideClose: false,\r\n    // position: 'right bottom',\r\n    title: _msg('fAndR-title'),\r\n    content:\r\n      $('<div>', { class: 'module far-module' }).append(\r\n        $('<div>', { class: 'module_content', id: 'findfielddiv' }).append(\r\n          $('<section>').append(\r\n            $('<h4>', { text: _msg('fAndR-find-text') }),\r\n            $('<textarea>', { id: 'find_this', style: 'margin: 0', rows: 4 }),\r\n            $('<h4>', { text: _msg('fAndR-replace-text') }),\r\n            $('<textarea>', { id: 'replace_with', style: 'margin: 0', rows: 4 })\r\n          ),\r\n          $('<section>', { style: 'padding: 7px 0' }).append(\r\n            $('<label>').append(\r\n              $('<input>', { type: 'checkbox', id: 'globl', checked: '' }),\r\n              $('<span>', { text: _msg('fAndR-globl') })\r\n            ),\r\n            $br,\r\n            $('<label>').append(\r\n              $('<input>', { type: 'checkbox', id: 'case_sen' }),\r\n              $('<span>', { text: _msg('fAndR-case-sen') })\r\n            ),\r\n            $br,\r\n            $('<label>').append(\r\n              $('<input>', { type: 'checkbox', id: 'regex_search' }),\r\n              $('<span>', { text: _msg('fAndR-enable-regex') })\r\n            ),\r\n          )\r\n        )\r\n      ),\r\n    buttons: [\r\n      {\r\n        label: _msg('fAndR-button-undo'),\r\n        className: 'btn btn-danger',\r\n        method: function (e, modal) {\r\n          element.val(origin);\r\n          ssi_modal.notify('info', {\r\n            className: 'in-page-edit',\r\n            title: _msg('notify-info'),\r\n            content: _msg('notify-fAndR-undo')\r\n          });\r\n          // modal.close();\r\n        }\r\n      },\r\n      {\r\n        className: 'btn btn-primary',\r\n        label: _msg('fAndR-button-replace'),\r\n        method: function (a, modal) {\r\n          /**\r\n           * 查找替换主函数\r\n           * 借鉴：https://dev.fandom.com/wiki/MediaWiki:FindAndReplace/code.js\r\n           **/\r\n          if ($('#find_this').val() === '') return;\r\n          var searchfor = '',\r\n            searchexp,\r\n            $textarea = element,\r\n            replacewith = $('#replace_with').val().replace(/\\r/gi, ''),\r\n            text = $textarea.val().replace(/\\r/gi, ''),\r\n            flagg = 'g',\r\n            flagi = 'i',\r\n            enableregex = 0;\r\n\r\n          if ($('#globl').prop('checked') === false) {\r\n            flagg = '';\r\n          }\r\n          if ($('#case_sen').prop('checked') === true) {\r\n            flagi = '';\r\n          }\r\n          if ($('#regex_search').prop('checked') === true) {\r\n            enableregex = 1;\r\n          }\r\n          var flags = flagg + flagi + 'm';\r\n          if (enableregex === 1) {\r\n            searchfor = $('#find_this').val();\r\n          } else {\r\n            searchfor = $('#find_this').val().replace(/\\r/gi, '').replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\r\n          }\r\n          searchexp = new RegExp(searchfor, flags);\r\n          var rcount = 0;\r\n          var matched = text.match(searchexp);\r\n          if (matched !== null) {\r\n            rcount = matched.length;\r\n          }\r\n          text = text.replace(searchexp, replacewith);\r\n          $textarea.val(text);\r\n          ssi_modal.notify('success', {\r\n            className: 'in-page-edit',\r\n            title: _msg('notify-success'),\r\n            content: _msg('notify-fAndR-done', rcount)\r\n          });\r\n          // modal.close();\r\n        }\r\n      }\r\n    ]\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  findAndReplace\r\n}","const { _msg } = require('./_msg');\r\n\r\nconst { $progress } = require('./_elements.js');\r\n\r\n/**\r\n * @module progress 载入中模块\r\n * @param {Boolean|String} title\r\n * @default \"Loading...\"\r\n * @returns\r\n * - true: Mark top progress box as done\r\n * - false: Close top progress box\r\n * - String: Show new progress box with title\r\n */\r\nvar progress = function (title) {\r\n  if (title === true) {\r\n    $('.in-page-edit.loadingbox .ssi-modalTitle').html(_msg('done'));\r\n    $('.in-page-edit.loadingbox .ipe-progress').addClass('done');\r\n  } else if (title === false) {\r\n    if ($('.in-page-edit.loadingbox').length > 0) {\r\n      $('.in-page-edit.loadingbox').appendTo('body');\r\n      ssi_modal.close();\r\n    }\r\n  } else {\r\n    if ($('.in-page-edit.loadingbox').length > 0) return;\r\n    if (typeof title === 'undefined') {\r\n      title = 'Loading...'\r\n    }\r\n    ssi_modal.show({\r\n      title: title,\r\n      content: $progress,\r\n      className: 'in-page-edit loadingbox',\r\n      center: true,\r\n      sizeClass: 'dialog',\r\n      closeIcon: false,\r\n      outSideClose: false\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  progress\r\n}","const { _msg } = require('./_msg');\r\n\r\nvar mwApi = new mw.Api();\r\n\r\n/**\r\n * @module quickPreview 快速预览文章页\r\n * @param params {Object} \r\n */\r\nvar quickPreview = function (params, modalSize = 'large', center = false) {\r\n  var defaultOptions = {\r\n    action: 'parse',\r\n    preview: true,\r\n    disableeditsection: true,\r\n    prop: 'text',\r\n    preview: true,\r\n    format: 'json'\r\n  }\r\n  var options = $.extend({}, defaultOptions, params);\r\n  mw.hook('InPageEdit.quickPreview').fire();\r\n  var timestamp = new Date().getTime();\r\n  console.time('[InPageEdit] Request preview');\r\n  ssi_modal.show({\r\n    sizeClass: new RegExp(/dialog|small|smallToMedium|medium|mediumToLarge|large|full|auto/).test(modalSize) ? modalSize : 'large',\r\n    center: Boolean(center),\r\n    className: 'in-page-edit previewbox',\r\n    title: _msg('preview-title'),\r\n    content: $('<section>').append(\r\n      $progress,\r\n      $('<div>', { class: 'InPageEditPreview', 'data-timestamp': timestamp, style: 'display:none', text: _msg('preview-placeholder') })\r\n    ),\r\n    fixedHeight: true,\r\n    fitScreen: true,\r\n    buttons: [{ label: '', className: 'hideThisBtn' }],\r\n    onShow: function (modal) {\r\n      $('.previewbox .ipe-progress').css('margin-top', $('.previewbox .ipe-progress').parent().height() / 2);\r\n      $('.previewbox .hideThisBtn').hide();\r\n      mwApi.post(options).then(function (data) {\r\n        console.timeEnd('[InPageEdit] Request preview');\r\n        var content = data.parse.text['*'];\r\n        $('.previewbox .ipe-progress').hide(150);\r\n        $('.InPageEditPreview[data-timestamp=\"' + timestamp + '\"]').fadeIn(500).html(content);\r\n      }).fail(function () {\r\n        console.timeEnd('[InPageEdit] Request preview');\r\n        console.warn('[InPageEdit] 预览失败');\r\n        $('.previewbox .ipe-progress').hide(150);\r\n        $('.InPageEditPreview[data-timestamp=\"' + timestamp + '\"]').fadeIn(500).html(_msg('preview-error'));\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  quickPreview\r\n}","var mwApi = new mw.Api();\r\n\r\nconst { articleLink } = require('./articleLink');\r\nconst { $br, $progress } = require('./_elements');\r\n\r\n/**\r\n * @module quickDiff 快速页面差异模块\r\n * @param {Object} param standard MediaWiki API params\r\n */\r\nvar quickDiff = function (param) {\r\n  mw.hook('InPageEdit.quickDiff').fire();\r\n  _analysis('quick_diff');\r\n  if ($('[href*=\"mediawiki.diff.styles\"]').length < 1) {\r\n    mw.loader.load(mw.util.wikiScript('load') + '?modules=mediawiki.legacy.shared|mediawiki.diff.styles&only=styles', 'text/css');\r\n  }\r\n  var $modalTitle,\r\n    $diffArea,\r\n    $loading;\r\n  if ($('.quick-diff').length > 0) {\r\n    console.info('[InPageEdit] Quick diff 正在加载新内容');\r\n    $modalTitle = $('.quick-diff .pageName');\r\n    $diffArea = $('.quick-diff .diffArea');\r\n    $loading = $('.quick-diff .ipe-progress');\r\n    $modalTitle.text(_msg('diff-loading'));\r\n    $diffArea.hide();\r\n    $('.quick-diff').appendTo('body');\r\n  } else {\r\n    $modalTitle = $('<span>', { class: 'pageName', text: _msg('diff-loading') });\r\n    $diffArea = $('<div>', { class: 'diffArea', style: 'display: none' });\r\n    $loading = $($progress);\r\n\r\n    ssi_modal.show({\r\n      className: 'in-page-edit quick-diff',\r\n      sizeClass: 'large',\r\n      fixedHeight: true,\r\n      fitScreen: true,\r\n      title: $modalTitle,\r\n      content: $('<div>').append($loading, $diffArea),\r\n      buttons: [{\r\n        label: _msg('diff-button-todiffpage'),\r\n        className: 'btn btn-secondary toDiffPage',\r\n        method: function () {\r\n          // ...\r\n        }\r\n      }]\r\n    });\r\n  }\r\n  $loading.show().css('margin-top', $('.quick-diff .ssi-modalContent').height() / 2);\r\n  $('.quick-diff .toDiffPage').unbind();\r\n  param.action = 'compare';\r\n  param.prop = 'diff|diffsize|rel|ids|title|user|comment|parsedcomment|size';\r\n  param.format = 'json';\r\n  if (param.totext) {\r\n    param.topst = true;\r\n  } else if (param.fromtext) {\r\n    param.frompst = true;\r\n  }\r\n  mwApi.post(param).then(function (data) {\r\n    var diffTable = data.compare['*'];\r\n    $loading.hide();\r\n    if (param.pageName === undefined) {\r\n      var toTitle = data.compare.totitle;\r\n    } else {\r\n      var toTitle = param.pageName;\r\n    }\r\n    var userLink = function (user) {\r\n      return '<a class=\"diff-user\" href=\"' + mw.util.getUrl('User:' + user) + '\">' + user + '</a> (<a href=\"' + mw.util.getUrl('User_talk:' + user) + '\">' + _msg('diff-usertalk') + '</a> | <a href=\"' + mw.util.getUrl('Special:Contributions/' + user) + '\">' + _msg('diff-usercontrib') + '</a> | <a href=\"' + mw.util.getUrl('Special:Block/' + user) + '\">' + _msg('diff-userblock') + '</a>)';\r\n    }\r\n    $modalTitle.html(_msg('diff-title') + ': <u>' + toTitle + '</u>');\r\n    $diffArea.show().html('').append(\r\n      $('<table>', { class: 'diff difftable' }).append(\r\n        $('<colgroup>').append(\r\n          $('<col>', { class: 'diff-marker' }),\r\n          $('<col>', { class: 'diff-content' }),\r\n          $('<col>', { class: 'diff-marker' }),\r\n          $('<col>', { class: 'diff-content' })\r\n        ),\r\n        $('<tbody>').append(\r\n          $('<tr>').append(\r\n            $('<td>', { colspan: 2, class: 'diff-otitle' }).append(\r\n              $('<a>', { href: config.wgScript + '?oldid=' + data.compare.fromrevid, text: data.compare.fromtitle }),\r\n              ' (',\r\n              $('<span>', { class: 'diff-version', text: _msg('diff-version') + data.compare.fromrevid }),\r\n              ') (',\r\n              $('<a>', { class: 'editLink', href: config.wgScript + '?action=edit&title=' + data.compare.fromtitle + '&oldid=' + data.compare.fromrevid, text: _msg('diff-edit') }),\r\n              ')',\r\n              $br,\r\n              userLink(data.compare.fromuser),\r\n              $br,\r\n              ' (',\r\n              $('<span>', { class: 'diff-comment', html: data.compare.fromparsedcomment }),\r\n              ') ',\r\n              $br,\r\n              $('<a>', { class: 'prevVersion ipe-analysis-quick_diff_modalclick', href: 'javascript:void(0);', text: '←' + _msg('diff-prev') }).click(() => {\r\n                quickDiff({\r\n                  fromrev: data.compare.fromrevid,\r\n                  torelative: 'prev'\r\n                });\r\n              })\r\n            ),\r\n            $('<td>', { colspan: 2, class: 'diff-ntitle' }).append(\r\n              $('<a>', { href: config.wgScript + '?oldid=' + data.compare.torevid, text: data.compare.totitle }),\r\n              ' (',\r\n              $('<span>', { class: 'diff-version', text: _msg('diff-version') + data.compare.torevid }),\r\n              ') (',\r\n              $('<a>', { class: 'editLink', href: config.wgScript + '?action=edit&title=' + data.compare.totitle + '&oldid=' + data.compare.torevid, text: _msg('diff-edit') }),\r\n              ')',\r\n              $br,\r\n              userLink(data.compare.touser),\r\n              $br,\r\n              ' (',\r\n              $('<span>', { class: 'diff-comment', html: data.compare.toparsedcomment }),\r\n              ') ',\r\n              $br,\r\n              $('<a>', { class: 'nextVersion ipe-analysis-quick_diff_modalclick', href: 'javascript:void(0);', text: _msg('diff-nextv') + '→' }).click(() => {\r\n                _analysis('quick_diff_modalclick');\r\n                quickDiff({\r\n                  fromrev: data.compare.torevid,\r\n                  torelative: 'next'\r\n                });\r\n              })\r\n            )\r\n          ),\r\n          diffTable,\r\n          $('<tr>', { class: 'diffSize', style: 'text-align: center' }).append(\r\n            $('<td>', { colspan: '2', text: data.compare.fromsize + _msg('diff-bytes') }),\r\n            $('<td>', { colspan: '2', text: data.compare.tosize + _msg('diff-bytes') })\r\n          )\r\n        )\r\n      )\r\n    );\r\n    $('.quick-diff button.toDiffPage').click(function () {\r\n      location.href = config.wgScript + '?oldid=' + data.compare.fromrevid + '&diff=' + data.compare.torevid;\r\n    });\r\n    articleLink($('.quick-diff .editLink'));\r\n    if (param.isPreview === true) {\r\n      $('.quick-diff button.toDiffPage').hide();\r\n      $diffArea.find('.diff-otitle').html('<b>' + _msg('diff-title-original-content') + '</b>');\r\n      $diffArea.find('.diff-ntitle').html('<b>' + _msg('diff-title-your-content') + '</b>');\r\n    }\r\n    if (data.compare.fromsize === undefined || data.compare.tosize === undefined) {\r\n      $diffArea.find('.diffSize').hide();\r\n    }\r\n    // 无上一版本或下一版本\r\n    if (data.compare.fromrevid === undefined && param.isPreview !== true) {\r\n      $diffArea.find('.diff-otitle').html('<span class=\"noPrevVerson\">' + data.warnings.compare['*'] + '</span>');\r\n    } else if (data.compare.torevid === undefined && param.isPreview !== true) {\r\n      $diffArea.find('.diff-ntitle').html('<span class=\"noNextVerson\">' + data.warnings.compare['*'] + '</span>');\r\n    }\r\n    // GitHub@issue#5 修复被隐藏版本的问题\r\n    if (data.compare.fromtexthidden !== undefined) {\r\n      $diffArea.find('.diff-otitle .diff-version').addClass('diff-hidden-history');\r\n    }\r\n    if (data.compare.totexthidden !== undefined) {\r\n      $diffArea.find('.diff-ntitle .diff-version').addClass('diff-hidden-history');\r\n    }\r\n    if (data.compare.fromuserhidden !== undefined) {\r\n      $diffArea.find('.diff-otitle .diff-user').addClass('diff-hidden-history');\r\n    }\r\n    if (data.compare.touserhidden !== undefined) {\r\n      $diffArea.find('.diff-ntitle .diff-user').addClass('diff-hidden-history');\r\n    }\r\n    if (data.compare.fromcommenthidden !== undefined) {\r\n      $diffArea.find('.diff-comment').addClass('diff-hidden-history');\r\n    }\r\n    if (data.compare.tocommenthidden !== undefined) {\r\n      $diffArea.find('.diff-ntitle .diff-comment').addClass('diff-hidden-history');\r\n    }\r\n    if (data.hasOwnProperty('error')) {\r\n      console.warn('[InPageEdit] 快速差异获取时系统告知出现问题');\r\n      $diffArea.html(_msg('diff-error') + ': ' + data.error.info + '(<code>' + data.error.code + '</code>)');\r\n    }\r\n  }).fail(function (errorCode, feedback, errorThrown) {\r\n    console.warn('[InPageEdit] 快速差异获取失败');\r\n    $loading.hide();\r\n    $diffArea.show().html(_msg('diff-error') + ': ' + errorThrown.error['info'] + '(<code>' + errorThrown.error['code'] + '</code>)');\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  quickDiff\r\n}","/**\r\n * @license GPL-3.0 GNU GENERAL PUBLIC LICENSE 3.0\r\n *\r\n * @name InPageEdit\r\n * @description A useful MediaWiki JavaScript Plugin written with jQuery\r\n * @author 机智的小鱼君 Dragon-Fish <dragon-fish@qq.com>\r\n * @url https://github.com/Dragon-Fish/InPageEdit-v2\r\n */\r\n\r\n'use strict';\r\n\r\n// 创建 InPageEdit 变量\r\nvar InPageEdit = window.InPageEdit || {};\r\n// 防止多次运行\r\nif (typeof InPageEdit.version !== 'undefined') {\r\n  throw '[InPageEdit] InPageEdit 已经在运行了';\r\n}\r\n\r\n\r\n// 导入全部模块\r\nconst { _msg } = require('./module/_msg');\r\nconst { about } = require('./module/about');\r\nconst { articleLink } = require('./module/articleLink');\r\nconst { findAndReplace } = require('./module/findAndReplace');\r\nconst { loadQuickDiff } = require('./module/loadQuickDiff');\r\nconst { quickEdit } = require('./module/quickEdit');\r\nconst { quickPreview } = require('./module/quickPreview');\r\nconst { quickRedirect } = require('./module/quickRedirect');\r\nconst { quickRename } = require('./module/quickRename');\r\nconst { specialNotice } = require('./module/specialNotice');\r\nconst version = require('./module/version');\r\nconst { versionInfo } = require('./module/versionInfo');\r\n\r\n// 写入模块\r\nInPageEdit = {\r\n  about,\r\n  articleLink,\r\n  findAndReplace,\r\n  quickEdit,\r\n  quickPreview,\r\n  quickRedirect,\r\n  quickRename,\r\n  specialNotice,\r\n  version,\r\n  versionInfo,\r\n}\r\n\r\n// 锁定重要变量\r\nvar importantVariables = [\r\n  'api',\r\n  'version',\r\n]\r\nimportantVariables.forEach(key => {\r\n  try {\r\n    Object.freeze(InPageEdit[key]);\r\n  } catch (e) { }\r\n});\r\n\r\n// 写入全局变量 window.InPageEdit\r\nwindow.InPageEdit = InPageEdit;\r\n\r\n// 触发钩子\r\nmw.hook('InPageEdit')\r\n  // 传入上下文\r\n  .fire({\r\n    _msg\r\n  });\r\n\r\n// 花里胡哨的加载提示\r\nconsole.info('    ____      ____                   ______    ___ __              _    _____ \\n   /  _/___  / __ \\\\____ _____ ____  / ____/___/ (_) /_            | |  / /__ \\\\\\n   / // __ \\\\/ /_/ / __ `/ __ `/ _ \\\\/ __/ / __  / / __/  ______    | | / /__/ /\\n _/ // / / / ____/ /_/ / /_/ /  __/ /___/ /_/ / / /_   /_____/    | |/ // __/ \\n/___/_/ /_/_/    \\\\__,_/\\\\__, /\\\\___/_____/\\\\__,_/_/\\\\__/              |___//____/ \\n                      /____/');","const api = require('./api.json');\r\n\r\n/**\r\n * @module about 关于插件模块\r\n * @description Show \"What is\" modal box of IPE2\r\n */\r\nvar about = function () {\r\n  ssi_modal.show({\r\n    title: _msg('preference-about-label'),\r\n    className: 'in-page-edit in-page-edit-about',\r\n    content: $('<section>').append(\r\n      $('<iframe>', { style: 'margin: 0;padding: 0;width: 100%;height: 80vh;border: 0;', src: api.aboutUrl })\r\n    )\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  about\r\n}","const { _msg } = require('./_msg');\r\n\r\nconst { quickDiff } = require('./quickDiff');\r\n\r\n/**\r\n * @module loadQuickDiff 在特定页面查询差异链接并绑定快速差异\r\n */\r\nvar loadQuickDiff = function () {\r\n  // 最近更改\r\n  function addLink(origin) {\r\n    $('.mw-changeslist-groupdiff, .mw-changeslist-diff, .mw-changeslist-diff-cur, .mw-history-histlinks a').unbind('click', ipeDiffLink);\r\n    var ipeDiffLink = $('.mw-changeslist-groupdiff, .mw-changeslist-diff, .mw-changeslist-diff-cur, .mw-history-histlinks a').click(function (e) {\r\n      e.preventDefault();\r\n      _analysis('quick_diff_recentchanges');\r\n      var $this = $(this),\r\n        href = $this.attr('href'),\r\n        diff = mw.util.getParamValue('diff', href),\r\n        curid = mw.util.getParamValue('curid', href),\r\n        oldid = mw.util.getParamValue('oldid', href);\r\n      if (diff === '0') {\r\n        quickDiff({ fromrev: oldid, toid: curid });\r\n      } else if (diff === 'prev' || diff === 'next' || diff === 'cur') {\r\n        quickDiff({ fromrev: oldid, torelative: diff });\r\n      } else {\r\n        quickDiff({ fromrev: oldid, torev: diff });\r\n      }\r\n    });\r\n  }\r\n  if ($('.mw-rcfilters-enabled').length > 0) {\r\n    setInterval(addLink, 500);\r\n    $('.mw-rcfilters-enabled').addClass('ipe-continuous-active');\r\n  } else {\r\n    addLink();\r\n  }\r\n  // 查看历史页面的比较按钮与快速编辑\r\n  if (config.wgAction === 'history') {\r\n    $('.historysubmit.mw-history-compareselectedversions-button').after(\r\n      $('<button>').text(_msg('quick-diff')).click(function (e) {\r\n        e.preventDefault();\r\n        _analysis('quick_diff_history_page');\r\n        var before = $('.selected.before').attr('data-mw-revid'),\r\n          after = $('.selected.after').attr('data-mw-revid');\r\n        quickDiff({ fromrev: after, torev: before });\r\n      })\r\n    );\r\n    $('[data-mw-revid]').each(function () {\r\n      var $this = $(this),\r\n        oldid = $this.attr('data-mw-revid');\r\n      $this.find('.mw-history-undo').after(\r\n        $('<span>').html(' | <a class=\"in-page-edit-article-link\" href=\"javascript:void(0);\" onclick=\"InPageEdit.quickEdit({page:mw.config.get(\\'wgPageName\\'),revision:' + oldid + '});\">' + _msg('quick-edit') + '</a>')\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  loadQuickDiff\r\n}","var mwApi = new mw.Api();\r\nconst { _msg } = require('./_msg');\r\n\r\nconst { pluginPreference } = require('./pluginPreference');\r\n\r\n/**\r\n * @module quickRedirect 快速重定向模块\r\n * @param {'from'|'to'} type\r\n */\r\nvar quickRedirect = function (type = 'to') {\r\n  mw.hook('InPageEdit.quickRedirect').fire();\r\n  var text = '#REDIRECT [[:$1]]',\r\n    question,\r\n    target,\r\n    json = {\r\n      action: 'edit',\r\n      createonly: 1,\r\n      minor: pluginPreference.get('editMinor'),\r\n      format: 'json',\r\n      errorformat: 'plaintext'\r\n    },\r\n    summary;\r\n\r\n  if (type === 'to') {\r\n    json.title = config.wgPageName;\r\n    question = _msg('redirect-question-to', '<b>' + config.wgPageName.replace(/_/g, ' ') + '</b>');\r\n  } else if (type === 'from') {\r\n    question = _msg('redirect-question-from', '<b>' + config.wgPageName.replace(/_/g, ' ') + '</b>');\r\n    summary = _msg('redirect-summary') + ' → [[:' + config.wgPageName + ']]';\r\n    json.text = text.replace('$1', config.wgPageName);\r\n  } else {\r\n    console.error('[InPageEdit] quickRedirect only accept \"from\" or \"to\"');\r\n    return;\r\n  }\r\n\r\n  ssi_modal.show({\r\n    outSideClose: false,\r\n    className: 'in-page-edit quick-redirect',\r\n    center: true,\r\n    sizeClass: 'dialog',\r\n    title: _msg('redirect-title'),\r\n    content: $('<div>').append(\r\n      $('<section>').append(\r\n        $('<span>', { html: question }),\r\n        $br,\r\n        $('<input>', { id: 'redirect-page', style: 'width:96%' }).click(function () { $(this).css('box-shadow', '') }),\r\n        $br,\r\n        $('<label>', { for: 'redirect-reason', text: _msg('editSummary') }),\r\n        $('<input>', { id: 'redirect-reason', style: 'width:96%' })\r\n      ),\r\n      $($progress).css('display', 'none')\r\n    ),\r\n    buttons: [{\r\n      label: _msg('confirm'),\r\n      className: 'btn btn-primary btn-single okBtn',\r\n      method: function (a, modal) {\r\n        target = $('.in-page-edit.quick-redirect #redirect-page').val();\r\n        if (target === '' || target.replace(/_/g, ' ') === config.wgPageName.replace(/_/g, ' ')) {\r\n          $('.in-page-edit.quick-redirect #redirect-page').css('box-shadow', '0 0 4px #f00');\r\n          return;\r\n        }\r\n\r\n        _analysis('quick_redirect');\r\n\r\n        if (type === 'to') {\r\n          summary = _msg('redirect-summary') + ' → [[:' + target + ']]';\r\n          json.text = text.replace('$1', target);\r\n        } else if (type === 'from') {\r\n          json.title = target;\r\n        }\r\n        if ($('.in-page-edit.quick-redirect #redirect-reason').val() !== '') {\r\n          summary = summary + ' (' + $('.in-page-edit.quick-redirect #redirect-reason').val() + ')';\r\n        }\r\n        json.summary = summary;\r\n\r\n        $('.in-page-edit.quick-redirect .ipe-progress').show();\r\n        $('.in-page-edit.quick-redirect section').hide();\r\n        $('.in-page-edit.quick-redirect .okBtn').attr('disabled', 'disabled');\r\n\r\n        mwApi.postWithToken('csrf', json).done(successed).fail(failed);\r\n        // 重定向成功\r\n        function successed(data) {\r\n          if (data.hasOwnProperty('errors')) {\r\n            failed(data.errors[0].code, data);\r\n            return;\r\n          }\r\n          $('.in-page-edit.quick-redirect .ipe-progress').addClass('done');\r\n          ssi_modal.notify('success', {\r\n            className: 'in-page-edit',\r\n            content: _msg('notify-redirect-success'),\r\n            title: _msg('notify-success')\r\n          });\r\n          if (type === 'to') {\r\n            window.location.reload();\r\n          } else {\r\n            $('.in-page-edit.quick-redirect .ipe-progress').addClass('done');\r\n            setTimeout(function () { modal.close() }, 2000);\r\n          }\r\n        }\r\n        // 重定向失败\r\n        function failed(errorCode, errorThrown) {\r\n          $('.in-page-edit.quick-redirect .ipe-progress').hide();\r\n          $('.in-page-edit.quick-redirect section').show();\r\n          $('.in-page-edit.quick-redirect .okBtn').attr('disabled', false);\r\n          $('.in-page-edit.quick-redirect .ipe-progress').addClass('done');\r\n          ssi_modal.notify('error', {\r\n            className: 'in-page-edit',\r\n            content: _msg('notify-redirect-error') + '<br>' + errorThrown.errors[0]['*'] + ' (<code>' + errorCode + '</code>)',\r\n            title: _msg('notify-error')\r\n          });\r\n          // 如果是由于页面存在，给出解决方案\r\n          if (errorCode === 'articleexists') {\r\n            var fromPage,\r\n              toPage;\r\n            if (type === 'from') {\r\n              fromPage = target;\r\n              toPage = config.wgPageName;\r\n            } else if (type === 'to') {\r\n              fromPage = config.wgPageName;\r\n              toPage = target;\r\n            }\r\n            _resolveExists(fromPage, {\r\n              delete: 'Delete for redirect to [[' + toPage + ']]',\r\n              edit: 'Modify for redirect'\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    ]\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  quickRedirect\r\n}","var mwApi = new mw.Api();\r\n\r\nconst { progress } = require('./progress');\r\n\r\n/**\r\n * @module quickRename 快速重命名模块\r\n * @param {String} from\r\n * @param {String} to\r\n */\r\nvar quickRename = function (from, to) {\r\n  mw.hook('InPageEdit.quickRename').fire();\r\n  var from = from || config.wgPageName,\r\n    to = to || '',\r\n    reason,\r\n    movetalk,\r\n    movesubpages,\r\n    noredirect,\r\n    ignorewarnings;\r\n\r\n  ssi_modal.show({\r\n    outSideClose: false,\r\n    className: 'in-page-edit quick-rename',\r\n    center: true,\r\n    sizeClass: 'dialog',\r\n    title: _msg('rename-title'),\r\n    content:\r\n      $('<section>').append(\r\n        $('<label>', { for: 'move-to', html: _msg('rename-moveTo', '<b>' + from.replace(/\\_/g, ' ') + '</b>') }),\r\n        $br,\r\n        $('<input>', { id: 'move-to', style: 'width:96%', onclick: \"$(this).css('box-shadow','')\" }),\r\n        $br,\r\n        $('<label>', { for: 'move-reason', text: _msg('editSummary') }),\r\n        $br,\r\n        $('<input>', { id: 'move-reason', style: 'width:96%' }),\r\n        $br,\r\n        $('<label>').append(\r\n          $('<input>', { type: 'checkbox', id: 'movetalk', checked: 'checked' }),\r\n          $('<span>', { text: _msg('rename-movetalk') })\r\n        ),\r\n        $br,\r\n        $('<label>').append(\r\n          $('<input>', { type: 'checkbox', id: 'movesubpages', checked: 'checked' }),\r\n          $('<span>', { text: _msg('rename-movesubpages') })\r\n        ),\r\n        $br,\r\n\r\n        $('<label>').append(\r\n          $('<input>', { type: 'checkbox', id: 'noredirect' }),\r\n          $('<span>', { text: _msg('rename-noredirect') })\r\n        ),\r\n      ),\r\n    buttons: [{\r\n      label: _msg('cancel'),\r\n      className: 'btn btn-secondary',\r\n      method: function (a, modal) {\r\n        modal.close();\r\n      }\r\n    }, {\r\n      label: _msg('confirm'),\r\n      className: 'btn btn-primary',\r\n      method: function () {\r\n        to = $('.in-page-edit.quick-rename #move-to').val();\r\n        if (to === '' || to === config.wgPageName || to === config.wgPageName.replace(/\\_/g, ' ')) {\r\n          $('.in-page-edit.quick-rename #move-to').css('box-shadow', '0 0 4px #f00');\r\n          return;\r\n        }\r\n\r\n        _analysis('quick_move');\r\n\r\n        progress(_msg('editor-title-saving'));\r\n        movetalk = $('.in-page-edit.quick-rename #movetalk').prop('checked');\r\n        movesubpages = $('.in-page-edit.quick-rename #movesubpages').prop('checked');\r\n        noredirect = $('.in-page-edit.quick-rename #noredirect').prop('checked');\r\n        reason = $('.in-page-edit.quick-rename #move-reason').val();\r\n\r\n        if (reason === '') {\r\n          reason = _msg('rename-summary') + ' → [[:' + to + ']]';\r\n        } else {\r\n          reason = _msg('rename-summary') + ' → [[:' + to + ']] (' + reason + ')';\r\n        }\r\n        mwApi.postWithToken('csrf', {\r\n          action: 'move',\r\n          from: from,\r\n          to: to,\r\n          reason: reason,\r\n          movetalk: movetalk,\r\n          movesubpages: movesubpages,\r\n          noredirect: noredirect\r\n        }).done(function () {\r\n          progress(true);\r\n          ssi_modal.notify('success', {\r\n            className: 'in-page-edit',\r\n            content: _msg('notify-rename-success'),\r\n            title: _msg('notify-success')\r\n          });\r\n          location.href = config.wgArticlePath.replace('$1', to);\r\n        }).fail(function (errorCode, feedback, errorThrown) {\r\n          progress(false);\r\n          ssi_modal.notify('error', {\r\n            className: 'in-page-edit',\r\n            content: _msg('notify-rename-error') + ': ' + errorThrown.error.info + '<code>' + errorThrown.error.code + '</code>',\r\n            title: _msg('notify-error')\r\n          });\r\n          // 如果原因是页面已存在，给出解决方案\r\n          if (errorThrown.error.code === 'articleexists') {\r\n            _resolveExists(to, 'For move page [[' + from + ']] to here.');\r\n          }\r\n        });\r\n      }\r\n    }],\r\n    beforeShow: function () {\r\n      if (!_hasRight('move')) {\r\n        ssi_modal.dialog({\r\n          title: _msg('notify-no-right'),\r\n          content: _msg('rename-no-right'),\r\n          className: 'in-page-edit quick-deletepage',\r\n          center: true,\r\n          okBtn: {\r\n            className: 'btn btn-primary btn-single'\r\n          }\r\n        });\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  quickRename\r\n}","const api = require('./api.json');\r\nconst { _msg } = require('./_msg')\r\n\r\n/**\r\n * @module specialNotice 特别通知\r\n */\r\nvar specialNotice = function () {\r\n  ssi_modal.notify('dialog', {\r\n    className: 'in-page-edit ipe-special-notice',\r\n    title: _msg('version-notice-title'),\r\n    content: _msg('version-notice'),\r\n    okBtn: {\r\n      label: _msg('updatelog-dismiss'),\r\n      className: 'btn btn-primary'\r\n    }\r\n  }, function (e, modal) {\r\n    localStorage.setItem('InPageEditNoticeId', _msg('noticeid'));\r\n    modal.close();\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  specialNotice\r\n}","const api = require('./api.json');\r\nconst version = require('./version');\r\n\r\n/**\r\n * @module versionInfo 版本信息模块\r\n * @description Show Update Logs Modal box\r\n */\r\nvar versionInfo = function () {\r\n  // 显示模态框\r\n  ssi_modal.show({\r\n    className: 'in-page-edit update-logs-modal',\r\n    title: _msg('updatelog-title') + ' - <span id=\"yourVersion\">' + version + '</span>',\r\n    content: $('<section>').append(\r\n      $('<iframe>', { style: 'margin: 0;padding: 0;width: 100%;height: 80vh;border: 0;', src: api.updatelogsUrl })\r\n    ),\r\n    buttons: [{\r\n      label: 'GitHub',\r\n      className: 'btn btn-secondary',\r\n      method: function () {\r\n        window.open(api.githubLink);\r\n      }\r\n    }, {\r\n      label: _msg('updatelog-about'),\r\n      className: 'btn btn-secondary',\r\n      method: function () {\r\n        window.open(api.aboutUrl);\r\n      }\r\n    }, {\r\n      label: _msg('close'),\r\n      className: 'btn btn-primary',\r\n      method: function (a, modal) {\r\n        modal.close();\r\n      }\r\n    }]\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  versionInfo\r\n}"],"sourceRoot":""}